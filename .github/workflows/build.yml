name: Build RacciCore

on: [ push, pull_request, workflow_dispatch ]

jobs:
  build:
  # Only run on PRs if the source branch is on someone else's repo
    if: ${{ github.event_name != 'pull_request' || github.repository != github.event.pull_request.head.repo.full_name }}
    strategy:
      matrix:
        os: ["ubuntu-latest", "windows-latest"]
    runs-on: "${{ matrix.os }}"
    steps:
    - name: "Checkout Repository"
      uses: "actions/checkout@v2"
    - name: "Setup JDK-16"
      uses: "actions/setup-java@v2"
      with:
        distribution: "adopt"
        java-version: "16"
    - name: "Grant execute permission for gradlew"
      run: "chmod +x gradlew"
    - name: "Build"
      run: "./gradlew build"
    #- name: "Publish"
    #  if: ${{ runner.os == 'Linux' && github.event_name == 'push' && github.ref == 'refs/heads/master' }}
    #  run: "./gradlew publish"
    #  env:
    #    ORG_GRADLE_PROJECT_username: ${{ secrets.USERNAME }}
    #    ORG_GRADLE_PROJECT_password: ${{ secrets.PASSWORD }}
